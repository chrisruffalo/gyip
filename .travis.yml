language: go

go:
- '1.10'

matrix:
  include:
  - os: linux
    dist: fedora
    sudo: required

git:
  depth: 1

notifications:
  email: false

script:
- go test -v -race ./...

before_deploy:
- cat /etc/redhat-release
- dnf install -y git buildah runc podman

deploy:
  on:
    branch: release
  provider: script
  script: bash deploy.sh
